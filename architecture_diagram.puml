@startuml

skinparam rectangle {
    BackgroundColor<<main>> LightBlue
    BackgroundColor<<agent>> LightGreen
    BackgroundColor<<external>> LightYellow
    BorderColor Black
    roundCorner 15
}

rectangle "Frontend Layer\n(Streamlit Web UI)" <<main>> as frontend

rectangle "Orchestrator Layer\n(orchestrator.py)\nLLM Query Classifier" <<main>> as orchestrator

rectangle "Power Flow Agent" <<main>> as powerflow

rectangle "Web Search Agent" <<main>> as websearch

rectangle "Ybus\nAgent" <<agent>> as ybus

rectangle "Gauss-Seidel\nAgent" <<agent>> as gs

rectangle "Loss\nAgent" <<agent>> as loss

rectangle "Fault\nAgent" <<agent>> as fault

rectangle "MATLAB Executor\nAgent" <<agent>> as matlabexec

rectangle "MATLAB Computation Layer\n(Calculations & Plotting)" <<main>> as matlab

rectangle "DuckDuckGo API\n(Web Search & Scraping)" <<external>> as duckduckgo

frontend -down-> orchestrator

orchestrator -down-> powerflow : "Power System\nQueries"

orchestrator -down-> websearch : "Web Search\nQueries"

orchestrator -down-> matlabexec : "MATLAB Code\nExecution"

powerflow -down-> ybus : "Ybus\nCalculation"

powerflow -down-> gs : "Power Flow\nSolution"

powerflow -down-> loss : "Loss\nCalculation"

powerflow -down-> fault : "Fault\nAnalysis"

ybus -down-> matlab

gs -down-> matlab

loss -down-> matlab

fault -down-> matlab

matlabexec -down-> matlab : "Direct Code\nExecution\n(Plot/Calc)"

websearch -down-> duckduckgo

@enduml

